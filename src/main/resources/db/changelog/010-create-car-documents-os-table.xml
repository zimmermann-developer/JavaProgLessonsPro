<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
                http://www.liquibase.org/xml/ns/dbchangelog
                https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.23.xsd">

        <changeSet id="10-create-car-documents-os-table" author="ait">
                <createTable tableName="car_documents_os">
                        <column name="id" type="BIGINT" autoIncrement="true">
                                <constraints primaryKey="true" nullable="false"/>
                        </column>

                        <column name="car_id" type="BIGINT">
                                <constraints nullable="false"/>
                        </column>

                        <column name="doc_type" type="VARCHAR(50)">
                                <constraints nullable="false"/>
                        </column>

                        <column name="original_filename" type="VARCHAR(255)">
                                <constraints nullable="false"/>
                        </column>

                        <column name="stored_filename" type="VARCHAR(255)">
                                <constraints nullable="false"/>
                        </column>

                        <column name="content_type" type="VARCHAR(100)">
                                <constraints nullable="false"/>
                        </column>

                        <column name="size" type="BIGINT">
                                <constraints nullable="false"/>
                        </column>

                        <column name="storage_path" type="VARCHAR(500)">
                                <constraints nullable="false"/>
                        </column>
                </createTable>

                <!-- внешний ключ на carId -->
                <addForeignKeyConstraint baseTableName="car_documents_os"
                                         baseColumnNames="car_id"
                                         constraintName="fk_car_docs_os_car_id"
                                         referencedTableName="cars"
                                         referencedColumnNames="id" />

        </changeSet>

</databaseChangeLog>